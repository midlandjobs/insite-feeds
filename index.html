<!DOCTYPE html>
<html lang="en">

  <head>

    <!-- metas -->
    <title>Tests</title>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="public/images/favicon.png" />
    <script
    src="https://code.jquery.com/jquery-3.1.0.js"
    integrity="sha256-slogkvB1K3VOkzAI8QITxV3VzpOnkeNVsKvtkYLMjfk="
    crossorigin="anonymous">
    </script> <!-- jQuery is now required on front rather than included within package -->
    <script type="text/javascript" src="public/js/api/feed.js"></script> 

    <!-- we now have a function to get jobs json from a valid xml source, & a class for converting that data into a filtered Jobs feed
    this script should now provide a thorough demonstration on how to use both the function and the class together.
    previously the fetching json part was within the converting part. but it now makes sense to keep them separate as they are useful individually too -->
    <script>

      (async function () {

        // PROXIES
        // 'https://testwp.com/wp-json/midlandjobs/v1/customFeed' == cors
        // 'https://proxy.com/' == cors
        // 'https://test.com/wp-json/midlandjobs/v1/customFeed......' == same-origin
        // 'https://test.com/......' == same-origin
        // dfseghjfjksgfs.com
        
        // get the jobs json data from a xml source
        var hello = null;
        var jobsJson = await fetchJobsJson('https://test.com/feeds/standard.xml', {proxy: 'https://proxy.com', key: 'gki56872y6ddr6hk7g1uzp3t45sbxg1b'});
        console.log(jobsJson);
        // set MODE or PROXY args up for the API build, to differenciate between cors for outside proxy (like proxy.com) & same-origin for internal proxy (like inside a wp plugin)
        // in the api build, fetchJobsJson() should allow optional custom MODE/PROXy args along with the url arg. this is so we can define a custom proxy location & mode the cors/same-origin for it 

        // create new a FilteredFeed object using the jobs json data & some configs
        // if the data given was good, jobs data will be available onthe newly created object @ .jobs
        // const myFeedObj = new JobBoardFilteredFeed(jobsJson, {

        //   //
        //   // base setting/s
        //   //

        //   // can be null or string/int. for template overrides you need to set an ID. for multiple feeds on a page (and with template overrides), you need to set a unique ID for each feed.
        //   // NB!!! at the moment a valid unique string or integer works for this, but we probably could sanitize and cast all potential types (string or int) as a string. just to be safe
        //   id: 'Hello', 

        //   sorting: false, // possible settings: 'title', 'date', 'referencenumber' & 'random'... remove this or set to false to leave sorting as default
        //   scope: null, // sets a custom scope to UiKit if UiKit exists. this is necessary for non-conflict css builds like in the plugin

        //   //
        //   // filters overall
        //   //

        //   // what parts of the feeds/filters setup are enabled. e.g filters or pagination. set to false to disable that part
        //   active_filters: true, active_pagination: true, active_perpage: true, active_search: true, active_counts: true,

        //   //
        //   // filters controls
        //   //

        //   // what parts of the filters themselves are enabled/disabled. e.g cats or cities. set to true to disable a filter control
        //   // we can also set an array to these to remove specific terms from a filter type e.g disable_cats: ['Marketing','marketing']
        //   disable_cats: false, disable_cities: false, disable_companies: false, disable_jobtypes: false

        // });

        // The ID in your config should correspond to the element's ID where you want to place the jobs e.g: a config ID of '56' should match an element with ID of 'Feed_56'
        // if config ID doesnt correspond to an element ID, renderTheJobs() will not ouput anything but jobs may still be available via obj.jobs for you to render them some other way
        // however, if renderTheJobs() is provided with a selector, it will allow you to use a custom element ID to attach the job feed to instead of the built in Feed_** format
        // console.log(myFeedObj.jobs);
        // myFeedObj.renderTheJobs();

      })();
    </script>
    
  </head>

  <body>

    <h1 id="MyTitle">Hello there...</h1>

    <div id="SomeDiv">
      <p>Some paragraph text...</p>
    </div>

    <div id="Feed_Hello" class="midlandjobs-feed">...loading</div>

  </body>

</html>